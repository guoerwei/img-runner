/*!
 * build: 2019-07-22 21:16:43
 * hash: c2b35002ec118cb26869
 */!function(l){function e(e){for(var n,t,r=e[0],a=e[1],o=e[2],i=0,u=[];i<r.length;i++)t=r[i],p[t]&&u.push(p[t][0]),p[t]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(l[n]=a[n]);for(m&&m(e);u.length;)u.shift()();return s.push.apply(s,o||[]),c()}function c(){for(var e,n=0;n<s.length;n++){for(var t=s[n],r=!0,a=1;a<t.length;a++){var o=t[a];0!==p[o]&&(r=!1)}r&&(s.splice(n--,1),e=d(d.s=t[0]))}return e}var t={},f={0:0},p={0:0},s=[];function d(e){if(t[e])return t[e].exports;var n=t[e]={i:e,l:!1,exports:{}};return l[e].call(n.exports,n,n.exports,d),n.l=!0,n.exports}d.e=function(s){var e=[];f[s]?e.push(f[s]):0!==f[s]&&{2:1,3:1}[s]&&e.push(f[s]=new Promise(function(e,r){for(var n="css/"+({}[s]||s)+".css",a=d.p+n,t=document.getElementsByTagName("link"),o=0;o<t.length;o++){var i=(l=t[o]).getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(i===n||i===a))return e()}var u=document.getElementsByTagName("style");for(o=0;o<u.length;o++){var l;if((i=(l=u[o]).getAttribute("data-href"))===n||i===a)return e()}var c=document.createElement("link");c.rel="stylesheet",c.type="text/css",c.onload=e,c.onerror=function(e){var n=e&&e.target&&e.target.src||a,t=new Error("Loading CSS chunk "+s+" failed.\n("+n+")");t.code="CSS_CHUNK_LOAD_FAILED",t.request=n,delete f[s],c.parentNode.removeChild(c),r(t)},c.href=a,document.getElementsByTagName("head")[0].appendChild(c)}).then(function(){f[s]=0}));var t=p[s];if(0!==t)if(t)e.push(t[2]);else{var n=new Promise(function(e,n){t=p[s]=[e,n]});e.push(t[2]=n);var r,a=document.createElement("script");a.charset="utf-8",a.timeout=120,d.nc&&a.setAttribute("nonce",d.nc),a.src=function(e){return d.p+"js/"+({}[e]||e)+".js"}(s);var o=new Error;r=function(e){a.onerror=a.onload=null,clearTimeout(i);var n=p[s];if(0!==n){if(n){var t=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;o.message="Loading chunk "+s+" failed.\n("+t+": "+r+")",o.name="ChunkLoadError",o.type=t,o.request=r,n[1](o)}p[s]=void 0}};var i=setTimeout(function(){r({type:"timeout",target:a})},12e4);a.onerror=a.onload=r,document.head.appendChild(a)}return Promise.all(e)},d.m=l,d.c=t,d.d=function(e,n,t){d.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},d.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(n,e){if(1&e&&(n=d(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(d.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var r in n)d.d(t,r,function(e){return n[e]}.bind(null,r));return t},d.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return d.d(n,"a",n),n},d.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},d.p="/static/",d.oe=function(e){throw console.error(e),e};var n=window.webpackJsonp=window.webpackJsonp||[],r=n.push.bind(n);n.push=e,n=n.slice();for(var a=0;a<n.length;a++)e(n[a]);var m=r;s.push([32,1]),c()}({12:function(e,n,t){"use strict";t.d(n,"c",function(){return r}),t.d(n,"b",function(){return a}),t.d(n,"a",function(){return l});var o=function(o,i,u,l){return new(u=u||Promise)(function(e,n){function t(e){try{a(l.next(e))}catch(e){n(e)}}function r(e){try{a(l.throw(e))}catch(e){n(e)}}function a(n){n.done?e(n.value):new u(function(e){e(n.value)}).then(t,r)}a((l=l.apply(o,i||[])).next())})},i=function(t,r){var a,o,i,e,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return e={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function n(n){return function(e){return function(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(!(i=0<(i=u.trys).length&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=r.call(t,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,e])}}},u=void 0,r=function(e){return function(r){return o(u,void 0,void 0,function(){return i(this,function(e){return[2,new Promise(function(e,n){var t=new FileReader;t.addEventListener("load",function(){e(t.result)},!1),t.addEventListener("error",function(e){n(e)},!1),t.readAsDataURL(r)})]})})}(e).then(function(e){return function(r){return o(u,void 0,void 0,function(){return i(this,function(e){return[2,new Promise(function(e,n){var t=new Image;t.addEventListener("load",function(){e(t)},!1),t.addEventListener("error",function(e){n(e)},!1),t.src=r})]})})}(e)})},a=function(a){return o(u,void 0,void 0,function(){return i(this,function(e){return[2,new Promise(function(n,t){var r=new XMLHttpRequest;r.open("get",a,!0),r.responseType="blob",r.addEventListener("load",function(){if(200===r.status){var e=new FileReader;e.addEventListener("loadend",function(){n(e.result)},!1),e.readAsDataURL(r.response)}},!1),r.addEventListener("error",function(e){t(e)},!1),r.send()})]})})},l=function(e){return 1e6<e?{bytes:e,unit:"MB",format:(e/1048576).toFixed(2)}:1e3<e?{bytes:e,unit:"KB",format:(e/1024).toFixed(2)}:{bytes:e,unit:"B",format:""+e}}},15:function(e,n,t){"use strict";var r,a,o=t(30),i=t.n(o),u=(r=function(e,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)},function(e,n){function t(){this.constructor=e}r(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),l=function(){return(l=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)},c=function(o,i,u,l){return new(u=u||Promise)(function(e,n){function t(e){try{a(l.next(e))}catch(e){n(e)}}function r(e){try{a(l.throw(e))}catch(e){n(e)}}function a(n){n.done?e(n.value):new u(function(e){e(n.value)}).then(t,r)}a((l=l.apply(o,i||[])).next())})},s=function(t,r){var a,o,i,e,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return e={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function n(n){return function(e){return function(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(!(i=0<(i=u.trys).length&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=r.call(t,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,e])}}},f=(a=Error,u(p,a),p);function p(){var e=null!==a&&a.apply(this,arguments)||this;return e.data=[],e}n.a=function(a,o){return void 0===o&&(o={}),c(void 0,void 0,void 0,function(){var r;return s(this,function(e){return r=l({},o.headers||{}),[2,new Promise(function(n,t){i()(l({},o,r,{url:a})).then(function(e){n(e.data.data)}).catch(function(e){if(e.response&&e.response.data){var n=new f(e.response.data.msg);n.data=e.response.data.data,t(n)}else t(e)})})]})})}},32:function(e,n,t){e.exports=t(63)},37:function(e,n,t){},40:function(e,n,t){},60:function(e,n,t){e.exports={item:"index__item--Nz91T",progressBarBg:"index__progressBarBg--2bWWZ",progressBar:"index__progressBar--2VPUF",prepare:"index__prepare--Q6Dod",progress:"index__progress--HYvY8",success:"index__success--3uIWA",error:"index__error--1bo8H"}},61:function(e,n,t){e.exports={uploader:"index__uploader--CUMaC",container:"index__container--3Z_7c",label:"index__label--33rbw",labelDragOver:"index__labelDragOver--1NXJJ",labelHint:"index__labelHint--2pQWv",fileInput:"index__fileInput--KDGiE",uploading:"index__uploading--1NqXL",uploadingContent:"index__uploadingContent--2uazl",config:"index__config--16pqO"}},62:function(e,n,t){},63:function(e,n,t){"use strict";t.r(n);function m(e){var a=e.file,o=e.album,n=e.config,i=void 0===n?{}:n,u=e.afterUpladHandler,t=Object(y.useState)(1),r=t[0],l=t[1],c=Object(y.useState)(null),s=c[0],f=c[1],p=Object(y.useState)(0),d=p[0],m=p[1],v=Object(y.useState)("准备中"),h=v[0],b=v[1],g=Object(E.a)(a.size);return Object(y.useEffect)(function(){_(void 0,void 0,void 0,function(){var n,t,r;return O(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),function(){if(!["image/png","image/jpeg","image/gif","image/webp","image/svg+xml"].includes(a.type))throw new Error("文件格式不正确");if(5242880<=a.size)throw new Error("图片尺寸过大")}(),[4,Object(E.c)(a)];case 1:return n=e.sent(),f(n),l(2),b("上传中"),[4,function(e,n){var t=e.file,r=e.config,a=e.album,o=void 0===a?0:a,i=new FormData;i.append("file",t),i.append("config",JSON.stringify(r));var u=o?"/api/album/"+o+"/upload":"/api/upload";return Object(x.a)(u,{method:"POST",headers:{"my-json-fields":"config"},data:i,onUploadProgress:n})}({file:a,config:i,album:o},function(e){m(e.loaded/e.total*100)})];case 2:return t=e.sent(),l(3),b("上传成功"),u(t.name),[3,4];case 3:return r=e.sent(),l(4),b(r.message||"处理图片失败"),[3,4];case 4:return[2]}})})},[a]),w.a.createElement("div",{className:k.item},w.a.createElement("div",{style:{backgroundImage:s?"url("+s.src+")":""}}),w.a.createElement("div",null,a.name),w.a.createElement("div",null,g.format," ",g.unit),w.a.createElement("div",{className:1===r?k.prepare:2===r?k.progress:3===r?k.success:k.error},w.a.createElement("div",null,2===r?h+": "+d.toFixed(2)+"%":h),w.a.createElement("div",{className:k.progressBarBg},2===r&&w.a.createElement("div",{className:k.progressBar,style:{width:d+"%"}}))))}function r(e){function n(e){e.preventDefault(),u(!0)}function t(e){s(parseInt(e.currentTarget.value,10))}function r(e){console.log("on uploaded",e)}var a=e.album,o=Object(y.useState)(!1),i=o[0],u=o[1],l=Object(y.useState)(3),c=l[0],s=l[1],f=Object(y.useState)([]),p=f[0],d=f[1];return w.a.createElement("div",{className:g.uploader},w.a.createElement("div",{className:g.container},w.a.createElement("label",{className:g.label+" "+(i?g.labelDragOver:""),onDragEnter:n,onDragOver:n,onDragLeave:function(e){e.preventDefault(),u(!1)},onDrop:function(t){return v(void 0,void 0,void 0,function(){var n;return h(this,function(e){return t.preventDefault(),n=t.dataTransfer,d(Array.from(n.files||[]).map(function(e){return{key:Math.random(),file:e}}).concat(p)),[2]})})}},w.a.createElement("div",{className:g.labelHint},"点此选择图片上传，或将图片拖至此处"),w.a.createElement("div",{className:g.labelHint},"支持5M以内的 png, jpg, gif, svg, webp"),w.a.createElement("input",{className:g.fileInput,type:"file",multiple:!0,accept:"image/png,image/jpeg,image/gif,image/webp,image/svg+xml",onChange:function(t){return v(void 0,void 0,void 0,function(){var n;return h(this,function(e){return t.preventDefault(),(n=t.currentTarget).value="",d(p.concat(Array.from(n.files||[]).map(function(e){return{key:Math.random(),file:e}}))),[2]})})}})),w.a.createElement("div",{className:g.config},b.map(function(e,n){return w.a.createElement("div",{key:n},w.a.createElement("label",null,w.a.createElement("input",{type:"radio",name:"optimizationLevel",value:e.value,checked:e.value===c,onChange:t}),e.text))}))),!!p.length&&w.a.createElement("div",{className:g.uploading},w.a.createElement("div",{className:g.uploadingContent},p.map(function(e){return w.a.createElement(m,{key:e.key,file:e.file,config:{optimizationLevel:c},album:a,afterUpladHandler:r})}))))}function a(){return w.a.createElement("div",{className:"home-page"},w.a.createElement("div",{className:"home-page__uploader"},w.a.createElement(r,null)))}var y=t(0),w=t.n(y),o=t(27),i=t.n(o),u=(t(37),t(31)),l=t(10),c=t.n(l),s=t(9),f=t(6),p=(t(40),[{label:"上传",link:"/"},{label:"图片",link:"/image"},{label:"tinypng账号",link:"/tinypng"}]),d=Object(f.f)(function(t){return w.a.createElement("div",{className:"app-header"},w.a.createElement("div",{className:"app-logo"},"测试用的后台"),w.a.createElement("div",{className:"app-nav"},p.map(function(e,n){return w.a.createElement(s.b,{className:"app-nav__item "+(e.link===t.location.pathname?"app-nav__item--current":""),to:e.link,key:n},e.label)})))}),E=t(12),x=t(15),_=function(o,i,u,l){return new(u=u||Promise)(function(e,n){function t(e){try{a(l.next(e))}catch(e){n(e)}}function r(e){try{a(l.throw(e))}catch(e){n(e)}}function a(n){n.done?e(n.value):new u(function(e){e(n.value)}).then(t,r)}a((l=l.apply(o,i||[])).next())})},O=function(t,r){var a,o,i,e,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return e={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function n(n){return function(e){return function(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(!(i=0<(i=u.trys).length&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=r.call(t,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,e])}}},k=t(60),v=function(o,i,u,l){return new(u=u||Promise)(function(e,n){function t(e){try{a(l.next(e))}catch(e){n(e)}}function r(e){try{a(l.throw(e))}catch(e){n(e)}}function a(n){n.done?e(n.value):new u(function(e){e(n.value)}).then(t,r)}a((l=l.apply(o,i||[])).next())})},h=function(t,r){var a,o,i,e,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return e={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function n(n){return function(e){return function(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(!(i=0<(i=u.trys).length&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=r.call(t,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,e])}}},b=[{value:0,text:"不压缩"},{value:1,text:"轻度压缩"},{value:2,text:"中度压缩"},{value:3,text:"默认"},{value:4,text:"重度压缩"}],g=t(61),j=(t(62),c()({loader:function(){return t.e(2).then(t.bind(null,76))},loading:function(){return null}})),N=c()({loader:function(){return t.e(4).then(t.bind(null,74))},loading:function(){return null}}),S=c()({loader:function(){return t.e(3).then(t.bind(null,75))},loading:function(){return null}}),P=Object(u.hot)(function(){return w.a.createElement(s.a,null,w.a.createElement("div",{className:"app"},w.a.createElement(d,null),w.a.createElement("div",{className:"app-main"},w.a.createElement(f.c,null,w.a.createElement(f.a,{path:"/image",component:S}),w.a.createElement(f.a,{path:"/tinypng",component:j}),w.a.createElement(f.a,{path:"/help",component:N}),w.a.createElement(f.a,{component:a})))))});i.a.render(w.a.createElement(P,null),document.querySelector("#app"))}});